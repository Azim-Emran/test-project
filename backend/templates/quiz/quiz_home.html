<!-- templates/quiz/quiz_home.html -->
{% extends 'layout.html' %}
{% block content %}
{% with messages = get_flashed_messages() %}
  {% if messages %}
    <div class="alert alert-warning alert-dismissible fade show mt-3" role="alert">
      {{ messages[0] }}
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  {% endif %}
{% endwith %}
<div class="container mt-5">
  <div class="text-center mb-4">
    <h2 class="fw-bold">ğŸ¯ Ready to Test Your Skills?</h2>
    <p class="text-muted">Choose a quiz type and topic to begin!</p>
  </div>

  <div class="card shadow-lg p-4 rounded-4 mx-auto" style="max-width: 600px;">
    <form method="POST" action="{{ url_for('quiz_bp.start_quiz') }}" id="quizForm">
      <div class="mb-3">
        <label for="quiz_type" class="form-label">ğŸ“ Quiz Type</label>
        <select name="quiz_type" id="quiz_type" class="form-select" required onchange="toggleTopicSelect()">
          <option value="" disabled selected>Select quiz type...</option>
          <option value="topic">ğŸ¯ Topical Quiz</option>
          <option value="random">ğŸ§  Exam Practice</option>
        </select>
      </div>

      <div class="mb-3" id="topicSelectContainer">
        <label for="topic" class="form-label">ğŸ“š Select Topic</label>
        <select name="topic" id="topic" class="form-select">
          <option value="Linear Equations">Linear Equations</option>
          <option value="Pythagoras Theorem">Pythagoras Theorem</option>
          <option value="Simultaneous Equations">Simultaneous Equations</option>
          <option value="Algebraic Expressions">Algebraic Expressions</option>
          <option value="Probability">Probability</option>
          <option value="Graphs">Graphs</option>
          <!-- Add more topics as needed -->
        </select>
      </div>

      <button type="submit" class="btn btn-primary w-100 mt-3">
        ğŸš€ Start Quiz
      </button>
    </form>
  </div>

  <div class="text-center mt-4">
    <img src="{{ url_for('static', filename='images/quiz-illustration.svg') }}" alt="Quiz Illustration" class="img-fluid" style="max-height: 250px;">
  </div>
</div>

<script>
function toggleTopicSelect() {
  const quizType = document.getElementById('quiz_type').value;
  const topicContainer = document.getElementById('topicSelectContainer');
  topicContainer.style.display = (quizType === 'topic') ? 'block' : 'none';
}

// Run on page load
window.onload = toggleTopicSelect;
</script>
{% endblock %}
